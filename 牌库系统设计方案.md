# 牌库系统设计方案

## 当前问题
- 牌库中只有少数几种动物单位
- ShopManager的unitPool需要手动配置
- AI招募系统的牌库管理功能尚未实现

## 解决方案

### 1. 创建完整的动物单位库
基于现有的动物卡片资源，创建对应的UnitData资产：

**森林动物（10种）**：
- 松鼠（已存在）
- 刺猬（需要创建）
- 野猪（需要创建） 
- 猫头鹰（需要创建）
- 赤狐（已存在）
- 小熊猫（需要创建）
- 梅花鹿（需要创建）
- 金丝猴（需要创建）
- 大熊猫（需要创建）
- 东北虎（老虎Data需要修复unitName）

### 2. 牌库管理系统
在AIRecruitmentManager中添加牌库管理功能：

```csharp
// 牌库数据结构
private Dictionary<string, int> animalDeck = new Dictionary<string, int>();

// 初始化牌库
void InitializeDeck()
{
    foreach (string animalName in Forest)
    {
        animalDeck[animalName] = 0; // 初始数量为0
    }
}

// 添加卡牌到牌库
public void AddCardToPool(string animalName, int count)
{
    if (animalDeck.ContainsKey(animalName))
    {
        animalDeck[animalName] += count;
        Debug.Log($"牌库更新: {animalName} x{animalDeck[animalName]}");
    }
}

// 从牌库移除卡牌  
public void RemoveCardFromPool(string animalName, int count)
{
    if (animalDeck.ContainsKey(animalName))
    {
        animalDeck[animalName] = Mathf.Max(0, animalDeck[animalName] - count);
        Debug.Log($"牌库更新: {animalName} x{animalDeck[animalName]}");
    }
}
```

### 3. 商店牌池配置
在ShopManager中配置完整的unitPool列表，包含所有可购买的动物单位。

### 4. 牌库显示功能
在GameUIController中添加牌库状态显示：

```csharp
public void UpdateDeckInfo()
{
    if (AIRecruitmentManager.Instance != null)
    {
        string deckInfo = "牌库状态:\n";
        foreach (var pair in AIRecruitmentManager.Instance.animalDeck)
        {
            if (pair.Value > 0)
            {
                deckInfo += $"{pair.Key}: x{pair.Value}\n";
            }
        }
        // 显示牌库信息
    }
}
```

## 实施步骤

1. **修复现有单位**：修复老虎Data的unitName字段
2. **创建缺失单位**：创建剩余的8种动物UnitData资产
3. **配置商店牌池**：在ShopManager的Inspector中配置unitPool
4. **实现牌库管理**：在AIRecruitmentManager中添加牌库功能
5. **连接答题系统**：在答题正确/错误时调用牌库增减方法

## 预期效果
- 完整的10种动物牌库系统
- 通过答题获得新卡牌加入牌库
- 牌库状态实时显示
- 商店随机从牌库中抽取可购买单位